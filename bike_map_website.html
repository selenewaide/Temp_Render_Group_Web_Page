<!DOCTYPE html>
<html>
  <head>
    <style>
      /* Set the map height explicitly to define the size of the div
       * element that contains the map. */
      #bikemap {
        height: 80%;
          width: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
<body>
    <h2>A header to go here.</h2>
<div id="bikemap"></div>
<script type = "text/javascript">
    var map;
      function initMap() {
          var markers = [
              {
                "title":"marker1",
                  "lat":53.37,
                  "lng":-6.32,
                  "description":"1_place",
                  "weather": "11 degs"
              },
                            {
                "title":"marker2",
                  "lat":53.29,
                  "lng":-6.22,
                  "description":"2_place",
                  "weather": "12 degs"
              },
                            {
                "title":"marker3",
                  "lat":53.30,
                  "lng":-6.30,
                  "description":"3_place",
                  "weather": "14 degs"
              },
                            {
                "title":"marker4",
                  "lat":53.31,
                  "lng":-6.27,
                  "description":"4_place",
                  "weather": "15 degs"
              }
          ];
var mapOptions = {
    center: {lat: 53.3498, lng: -6.2603},
    zoom: 11,
            };
// create new infowindow object to display data for each location          
var infoWindow = new google.maps.InfoWindow();    
// create map with map options as detailed above
var map = new google.maps.Map(document.getElementById('bikemap'), mapOptions); 
// Apply markers
for (var i =0; i < markers.length; i++)
{
    var data = markers[i];
    var myLatLng = new google.maps.LatLng(data.lat, data.lng);
    var marker = new google.maps.Marker({
    position: myLatLng,
    map:map,
    title: data.title
    });
// display the markers on the map and add event listener to display the info window
(function(marker,data){
    google.maps.event.addListener(marker,"click", function(e){
    infoWindow.setContent('<div>' + 'Station: '+ data.description + '</div>'+ '<br>' + '<div>' + 'Temp: ' + data.weather + '</div>');
    infoWindow.open(map, marker);
    });
})(marker,data);
}}  
      ;
    </script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpRyVBwMrG8-n-UCAYsESggtio4kcUxUQ&callback=initMap">
</script>
  </body>
</html>